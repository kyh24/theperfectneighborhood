<html>
  <head>
    <title>The Perfect Neighborhood</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="/static/multirange.css" />
    <!-- <link rel="stylesheet" href="/static/autocomplete.css" /> -->
    <link rel="stylesheet" href="/static/main.css" />
    <link
      href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i&display=swap"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
    <script src="/static/autocomplete.js"></script>
    <script src="/static/script.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDkJTfA9iboEc6Wc1y-FEPrH3-wIBfonDE&libraries=places&callback=initMap"
      async
      defer
    ></script>
  </head>
  <body>
    <div id="app">
      <div id="versions">
        <a href="https://theperfectneighborhood-v1.herokuapp.com/">version one</a>
      </div>
      <!-- <div class="topcorner"><p>Project Name: {{ name }}</p><p>Student Name: ({{ netid }})</p></div> -->
      <div id="search">
        <div id="intro">
          <h1>The Perfect Neighborhood</h1>
          <p>
            Stephanie Chang (sc2524), Kati Hsu (kyh24), Robert Zhang (rdz26),
            Sneha Kumar (sk2279), Shirley Kabir (szk4)
          </p>
        </div>
        <div id="search-form">
          <form class="form-inline global-search" method="POST">
            <div id="commute-type-input">
              <label>Commute Type</label>
              <select id="commute" name="commute-type">
                <option value="Walk" {% if query and query['commute-type']=='Walk' %} selected="selected"{% endif %}>Walk</option>
                <option value="Bike" {% if query and query['commute-type']=='Bike' %} selected="selected"{% endif %}>Bike</option>
                <option value="Car" {% if query and query['commute-type']=='Car' %} selected="selected"{% endif %}>Car</option>
                <option value="Public Transit" {% if query and query['commute-type']=='Public Transit' %} selected="selected"{% endif %}>Public Transit</option>
              </select>
            </div>
            <div id="commute-duration-input">
              <label>Commute Duration</label>
              <input
                id="commute-duration"
                type="number"
                name="commute-duration"
                class="form-control"
                value="15"
              />
            </div>
            <div id="pac-container">
              <label>Destination</label>
              <input
                id="pac-input"
                type="text"
                placeholder="Enter a location"
              />
            </div>

            <div id="budget-input">
              <label>Budget</label>
              <input
                id="budget-min"
                type="number"
                name="budget-min"
                class="form-control"
                {% if query %}
                value="{{ query['budget-min'] }}"
                {% else %}
                value="1200"
                {% endif %}
              />
              to
              <input
                id="budget-max"
                type="number"
                name="budget-max"
                class="form-control"
                {% if query %}
                value="{{ query['budget-max'] }}"
                {% else %}
                value="3700"
                {% endif %}
              />
            </div>

            <div id="age-input">
              <label>Age</label>
              <input
                id="age"
                type="number"
                name="age"
                class="form-control"
                {% if query %}
                value="{{ query['age'] }}"
                {% else %}
                value="22"
                {% endif %}
              />
            </div>

            <div id="keywords-type-input">
              <label>Keywords</label>
              <!-- <select multiple class="chosen-select" name="likes">
                <option value=""></option>
                <option value="Working Out">Working Out</option>
                <option value="Coffee Shops">Coffee Shops</option>
                <option value="Watching Movies">Watching Movies</option>
                <option value="Nightlife">Nightlife</option>
                <option value="Music">Music</option>
                <option value="Theater">Theater</option>
                <option value="Restaurants">Restaurants</option>
                <option value="Shopping">Shopping</option>
                <option value="Art">Art</option>
                <option value="Outdoors">Outdoors</option>
              </select> -->
              <select name="likes" id="keywords">
                <option value=""></option>
                <option value="Working Out" {% if query and "Working Out" in query['likes'] %} selected="selected"{% endif %}>Working Out</option>
                <option value="Coffee Shops" {% if query and "Coffee Shops" in query['likes'] %} selected="selected"{% endif %}>Coffee Shops</option>
                <option value="Watching Movies" {% if query and "Watching Movies" in query['likes'] %} selected="selected"{% endif %}>Watching Movies</option>
                <option value="Nightlife" {% if query and "Nightlife" in query['likes'] %} selected="selected"{% endif %}>Nightlife</option>
                <option value="Music" {% if query and "Music" in query['likes'] %} selected="selected"{% endif %}>Music</option>
                <option value="Theater" {% if query and "Theater" in query['likes'] %} selected="selected"{% endif %}>Theater</option>
                <option value="Restaurants" {% if query and "Restaurants" in query['likes'] %} selected="selected"{% endif %}>Restaurants</option>
                <option value="Shopping" {% if query and "Shopping" in query['likes'] %} selected="selected"{% endif %}>Shopping</option>
                <option value="Art" {% if query and "Art" in query['likes'] %} selected="selected"{% endif %}>Art</option>
                <option value="Outdoors" {% if query and "Outdoors" in query['likes'] %} selected="selected"{% endif %}>Outdoors</option>
              </select>
            </div>



            <input id="submit" type="submit" value="Go!" onclick="loadResults()" />
          </form>
        </div>
      </div>
      {% if data %}
      <div id="results">
        <h2>Top Picks</h2>
        <section id="filters">
          <a class="active" onclick="sort(this)">Overall</a>
          <a onclick="sortBudget(this)">Budget</a>
          <a onclick="sortAge(this)">Age</a>
          <a onclick="sortCommute(this)">Commute</a>
          <a onclick="sortLikes(this)">Keywords</a>
        </section>
        <form class="form-inline global-search">
          <br />
          {% for d in data %}

          <div
            class="result"
            overall-order="{{d['score']}}"
            age-order="{{d['age']}}"
            commute-order="{{d['commute']}}"
            budget-order="{{d['budget']}}"
            likes-order="{{d['likes']}}"
          >
            <div
              style="background-image: url({{d['image-url']}});"
              class="neighborhood-image"
            ></div>
            <div class="snippet">
              <div class="label">Neighborhood</div>
              <h3>{{d['name']}}</h3>
              <div class="label">Score</div>
              <h6>{{d['score']}}</h6>
              <div class="label">Median Rent</div>
              <h6>{{d['median rent']}}</h6>
              <a href="more">
                <img src="static/more.jpg" class="more-link" />
              </a>
            </div>
            <div class="description">
              <h4>All to know...</h4>
              <h5>{{d['short description']}}</h5>
              <p>{{d['long description']}}</p>
              <!-- {% for para in d['long description'] %} {% if loop.index <= 1 %}
              <p>{{para}}</p>
              {% endif %} {% endfor %} -->
            </div>
          </div>
          {% endfor %}
        </form>
        <br>
        <br>
        <br>
        <br>
      </div>
      {% endif %}
    </div>
  </body>
</html>
